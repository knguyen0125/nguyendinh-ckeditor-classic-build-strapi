<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>CKEditor 5 – classic editor build – development sample</title>
		<style>
			body {
				max-width: 800px;
				margin: 20px auto;
			}
		</style>
	</head>
	<body>
		<h1>CKEditor 5 – classic editor build – development sample</h1>

		<div id="editor">
			<h2>Sample</h2>

			<p>
				This is an instance of the
				<a
					href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/overview.html#classic-editor"
					>classic editor build</a
				>.
			</p>

			<figure class="image">
				<img src="../tests/manual/sample.jpg" alt="Autumn fields" />
			</figure>

			<p>
				You can use this sample to validate whether your
				<a
					href="https://ckeditor.com/docs/ckeditor5/latest/builds/guides/development/custom-builds.html"
					>custom build</a
				>
				works fine.
			</p>
		</div>

		<script src="../build/ckeditor.js"></script>
		<script src="../node_modules/@ckeditor/ckeditor5-inspector/build/inspector.js"></script>

		<script>
			ClassicEditor.create(document.querySelector('#editor'))
				.then(editor => {
					CKEditorInspector.attach(editor);

					editor.conversion.for('downcast').add(dispatcher => {
						dispatcher.on(
							'attribute:fontFamily',
							(evt, data, conversionApi) => {
								const viewWriter = conversionApi.writer;
								const viewSelection =
									viewWriter.document.selection;

								console.log(editor.config);
								console.log('data', data);
								console.log('writer', viewWriter);
								console.log(viewSelection);
								console.log(viewSelection.getFirstRange());

								const attributes = {
									'data-font-family': 'blank'
								};

								// viewWriter.setAttribute(
								// 	'data-font-family',
								// 	'blank',
								// 	conversionApi.mapper.toViewElement(
								// 		data.item
								// 	)
								// );

								// viewWriter.addClass(
								// 	'my-heading',
								// 	conversionApi.mapper.toViewElement(
								// 		data.item
								// 	)
								// );
							},
							{ priority: 'low' }
						);
					});

					window.editor = editor;
				})
				.catch(error => {
					console.error(
						'There was a problem initializing the editor.',
						error
					);
				});
		</script>
	</body>
</html>
